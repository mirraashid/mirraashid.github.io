<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Document</title>
    <style>
        .main-heading {
            background-color: #074733;
            color: #fff;
        }

        .calc-section {
            margin-top: 20px;
        }



        .h-text {
            color: #fff;
        }

        .c1-b {
            background-color: #66c28f;
        }

        .c2-b {
            background-color: #2c797e;
        }

        .c1-border {
            border: 2px solid #66c28f;
        }

        .c2-border {
            border: 2px solid #2c797e;
        }

        .q-container {
            margin-bottom: 30px;
        }

        .result-container {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            margin-top: 30px;
            margin-bottom: 30px;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 700;
        }

        #result1{
            background: #66c28f80;
        }

        #result2{
            background: #2c797ea6;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <!--Plan Info-->
        <div class="calc-section">
            <div class="row text-center">
                <div class="col main-heading">
                    <h3>About the Plans</h3>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-sm">
                    <div class="row">
                        <div class="col h-text c1-b">
                            <h4>Option #1</h4>
                        </div>
                    </div>
                    <div class="row c1-border text-start">
                        <div class="col-12 q-container">
                            <span>Type of Plan</span>
                            <div class="radio-container">
                                <div>
                                    <input type="radio" name="type-of-plan-A" value="Employer" checked />
                                    <label>Employer</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="type-of-plan-A" value="Marketplace" checked />
                                    <label>Marketplace</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="type-of-plan-A" value="Other" checked />
                                    <label>Other</label>
                                  </div>
                            </div>
                        </div>
                        <div class="col-12 q-container">
                            <span>Plan Type</span>
                            <div class="radio-container">
                                <div>
                                    <input type="radio" name="plan-type-A" value="HMO" checked />
                                    <label>HMO</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="plan-type-A" value="PPO" checked />
                                    <label>PPO</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="plan-type-A" value="EPO/Other" checked />
                                    <label>EPO/Other</label>
                                  </div>
                            </div>
                        </div>
                        <div class="col-12 q-container">
                            <span>Insurance Company Name:</span>
                            <input type="text" />
                        </div>
                        <div class="col-12 q-container">
                            <span>Plan Name:</span>
                            <input type="text" />
                        </div>
                        <div class="col-12 q-container">
                            <span>Is my primary care physician in the plans's network?</span>
                            <div>
                                <div>
                                    <input type="radio" name="primary-care-physician-A" value="Yes" checked />
                                    <label>Yes</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="primary-care-physician-A" value="No" checked />
                                    <label>No</label>
                                  </div>
                            </div>
                        </div>
                        <div class="col-12 q-container">
                            <span>Are my hospitals and specialists(e.g., oncologist, surgeon, etc.)in the plan's network?</span>
                            <div class="radio-container">
                                <div>
                                    <input type="radio" name="plan-network-A" value="Yes" checked />
                                    <label>Yes</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="plan-network-A" value="No" checked />
                                    <label>No</label>
                                  </div>
                            </div>
                        </div>
                        <div class="col-12 q-container">
                            <span>Are the prescription drugs I take covered by the plan?</span>
                            <div class="radio-container">
                                <div>
                                    <input type="radio" name="prescription-rx-covered-A" value="Yes" checked />
                                    <label>Yes</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="prescription-rx-covered-A" value="No" checked />
                                    <label>No</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="prescription-rx-covered-A" value="No" checked />
                                    <label>Only Some</label>
                                  </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm border-calc">
                    <div class="row">
                        <div class="col h-text c2-b">
                            <h4>Option #2</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col c2-border text-start">
                            <div class="col-12 q-container">
                                <span>Type of Plan</span>
                                <div class="radio-container">
                                    <div>
                                        <input type="radio" name="type-of-plan-B" value="Employer" checked />
                                        <label>Employer</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="type-of-plan-B" value="Marketplace" checked />
                                        <label>Marketplace</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="type-of-plan-B" value="Other" checked />
                                        <label>Other</label>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12 q-container">
                                <span>Plan Type</span>
                                <div class="radio-container">
                                    <div>
                                        <input type="radio" name="plan-type-B" value="HMO" checked />
                                        <label>HMO</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="plan-type-B" value="PPO" checked />
                                        <label>PPO</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="plan-type-B" value="EPO/Other" checked />
                                        <label>EPO/Other</label>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12 q-container">
                                <span>Insurance Company Name:</span>
                                <input type="text" />
                            </div>
                            <div class="col-12 q-container">
                                <span>Plan Name:</span>
                                <input type="text" />
                            </div>
                            <div class="col-12 q-container">
                                <span>Is my primary care physician in the plans's network?</span>
                                <div>
                                    <div>
                                        <input type="radio" name="primary-care-physician-B" value="Yes" checked />
                                        <label>Yes</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="primary-care-physician-B" value="No" checked />
                                        <label>No</label>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12 q-container">
                                <span>Are my hospitals and specialists(e.g., oncologist, surgeon, etc.)in the plan's network?</span>
                                <div class="radio-container">
                                    <div>
                                        <input type="radio" name="plan-network-B" value="Yes" checked />
                                        <label>Yes</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="plan-network-B" value="No" checked />
                                        <label>No</label>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12 q-container">
                                <span>Are the prescription drugs I take covered by the plan?</span>
                                <div class="radio-container">
                                    <div>
                                        <input type="radio" name="prescription-rx-covered-B" value="Yes" checked />
                                        <label>Yes</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="prescription-rx-covered-B" value="No" checked />
                                        <label>No</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="prescription-rx-covered-B" value="No" checked />
                                        <label>Only Some</label>
                                      </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Plan Cost-->
        <div class="calc-section">
            <div class="row text-center">
                <div class="col main-heading">
                    <h3>Plan Costs</h3>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-sm">
                    <div class="row">
                        <div class="col h-text c1-b">
                            <h4>Option #1</h4>
                        </div>
                    </div>
                    <div class="row c1-border text-start">

                        <div class="col-12 q-container mt-4">
                            <span>Monthly Premium: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="A_1" class="form-control" id="inlineFormInputGroup" placeholder="Permium Value">
                                </div>
                            </div>
                        </div>

                        <div class="col-12 q-container mt-4">
                            <span>Deductible: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="B_1" class="form-control" id="inlineFormInputGroup" placeholder="Deductible">
                                </div>
                            </div>
                        </div>


                        <div class="col-12 q-container mt-4">
                            <span>Out-of-pocket Maximum for an Individual: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="C_1" class="form-control" id="inlineFormInputGroup" placeholder="">
                                </div>
                            </div>
                        </div>


                        <div class="col-12 q-container mt-4">
                            <span>Is there a separate deductible for prescription drugs? If yes, enter amount: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="D_1" class="form-control" id="inlineFormInputGroup" placeholder="">
                                </div>
                            </div>
                        </div>


                        <div class="col-12 q-container mt-4">
                            <span>Is there a separate out-of-pocket maximum for prescription drugs? If yes, enter amount: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="E_1" class="form-control" id="inlineFormInputGroup" placeholder="">
                                </div>
                            </div>
                        </div>

                        <div class="col-12 q-container mt-4 text-center">
                            <button onclick="calculateOption1()">Calculate Option 1</button>
                        </div>


                    </div>
                </div>
                <div class="col-sm border-calc">
                    <div class="row">
                        <div class="col h-text c2-b">
                            <h4>Option #2</h4>
                        </div>
                    </div>
                    <div class="row c2-border text-start">

                            <div class="col-12 q-container mt-4">
                                <span>Monthly Premium: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="A_2" class="form-control" id="inlineFormInputGroup" placeholder="Permium Value">
                                    </div>
                                </div>
                            </div>
    
                            <div class="col-12 q-container mt-4">
                                <span>Deductible: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="B_2" class="form-control" id="inlineFormInputGroup" placeholder="Deductible">
                                    </div>
                                </div>
                            </div>
    
    
                            <div class="col-12 q-container mt-4">
                                <span>Out-of-pocket Maximum for an Individual: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="C_2" class="form-control" id="inlineFormInputGroup" placeholder="">
                                    </div>
                                </div>
                            </div>
    
    
                            <div class="col-12 q-container mt-4">
                                <span>Is there a separate deductible for prescription drugs? If yes, enter amount: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="D_2" class="form-control" id="inlineFormInputGroup" placeholder="">
                                    </div>
                                </div>
                            </div>
    
    
                            <div class="col-12 q-container mt-4">
                                <span>Is there a separate out-of-pocket maximum for prescription drugs? If yes, enter amount: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="E_2" class="form-control" id="inlineFormInputGroup" placeholder="">
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 q-container mt-4 text-center">
                                <button onclick="calculateOption2()">Calculate Option 2</button>
                            </div>
    
                    </div>
                </div>
            </div>
        </div>

        <!--Results-->
        <div class="calc-section">
            <div class="row text-center">
                <div class="col main-heading">
                    <h3>Results</h3>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-sm">
                    <div class="row">
                        <div class="col h-text c1-b">
                            <h4>Option #1</h4>
                        </div>
                    </div>
                    <div class="row c1-border">
                        <div class="col">
                            <div class="result-container" id="result1">
                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm border-calc">
                    <div class="row">
                        <div class="col h-text c2-b">
                            <h4>Option #2</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col c2-border">
                            <div class="result-container" id="result2">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    /*
    LEGEND - 

        A - Monthly Premium
        B - Deductible
        C - Out-of-pocket Maximum for an Individual
        D - Separate deductible for prescription drugs
        E - Separate out-of-pocket maximum for prescription drugs

    CALCULATIONS - 

        CASES:
        1. Integrated deductible & OOP max: D and E are 0 or blank
        2. Separate deductible, shared OOP max: D > 0, E = 0
        3. Separate deductible & separate OOP max: D > 0, E > 0

    */

    // Format number with commas
    function formatNumberWithCommas(value) {
        const parts = value.split(".");
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return parts.join(".");
    }

    // Strip all non-numeric characters except decimal
    function stripNonNumeric(value) {
        return value.replace(/[^\d.]/g, "");
    }

    // Apply formatting while typing
    function handleNumericInput(event) {
        let input = event.target;
        let rawValue = stripNonNumeric(input.value);
        
        if (rawValue === "") {
            input.value = "";
            return;
        }

        // Allow only one decimal
        const parts = rawValue.split(".");
        if (parts.length > 2) {
            input.value = formatNumberWithCommas(parts[0] + "." + parts[1]);
            return;
        }

        input.value = formatNumberWithCommas(rawValue);
    }

    // Convert formatted input back to float
    function parseFormattedNumber(value) {
        return parseFloat(value.replace(/,/g, "")) || 0;
    }


    function calculateTotalCost(option) {
        const monthlyPremium = parseFormattedNumber(document.getElementById(`A_${option}`).value) || 0;
        const deductible = parseFormattedNumber(document.getElementById(`B_${option}`).value) || 0;
        const oopMax = parseFormattedNumber(document.getElementById(`C_${option}`).value) || 0;
        const rxDeductible = parseFormattedNumber(document.getElementById(`D_${option}`).value) || 0;
        const rxOopMax = parseFormattedNumber(document.getElementById(`E_${option}`).value) || 0;

        // Annual premium
        const annualPremium = monthlyPremium * 12;

        let totalCost = 0;

        // Case 1: Integrated deductible and OOP max
        if (deductible === 0 && rxOopMax === 0) {
            totalCost = annualPremium + oopMax ;
        }
        // Case 2: Separate deductible but shared OOP max
        else if (deductible > 0 && rxOopMax === 0) {
            totalCost = annualPremium + deductible + oopMax;
        }
        // Case 3: Separate deductible and separate OOP max
        else if (deductible > 0 && rxDeductible > 0 && rxOopMax > 0) {
            // We assume the person hits both OOP maximums
            totalCost = annualPremium + deductible + oopMax + rxDeductible + rxOopMax;
        }
        else {
            totalCost = annualPremium + oopMax; // fallback
        }

        document.getElementById(`result${option}`).innerText = `Total Out-of-Pocket Cost for Option #${option}: $${(totalCost.toFixed(2)*1).toLocaleString()}`;
    } 

    function calculateOption1() {
        calculateTotalCost(1);
    }

    function calculateOption2() {
        calculateTotalCost(2);
    }

     // Attach event listener to all numeric fields on load
     window.addEventListener("DOMContentLoaded", () => {
        const fields = ["A_1", "B_1", "C_1", "D_1", "E_1", "A_2", "B_2", "C_2", "D_2", "E_2"];
        fields.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                el.addEventListener("input", handleNumericInput);
            }
        });
    });
</script>
</html>
