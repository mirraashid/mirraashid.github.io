<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Document</title>
    <style>
        .main-heading {
            background-color: #074733;
            color: #fff;
        }

        .calc-section {
            margin-top: 20px;
        }

        .h-text {
            color: #fff;
        }

        .c1-b {
            background-color: #66c28f;
        }

        .c2-b {
            background-color: #2c797e;
        }

        .c1-border {
            border: 2px solid #66c28f;
        }

        .c2-border {
            border: 2px solid #2c797e;
        }

        .q-container {
            margin-bottom: 30px;
        }

        .result-container {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            margin-top: 30px;
            margin-bottom: 30px;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 700;
        }

        .btn-1 {
            background: #66c28f80;
            border: 1px solid;
            cursor: pointer;
            height: 50px;
            width: 200px;
            font-size: large;
            font-weight: 400;
        }

        .btn-2 {
            background: #2c797ea6;
            border: 1px solid;
            cursor: pointer;
            height: 50px;
            width: 200px;
            font-size: large;
            font-weight: 400;
        }

        .btn-3 {
            background: #074733;
            margin: auto;
            display: block;
            margin-top: 30px;
            margin-bottom: 50px;
            border: 1px solid;
            cursor: pointer;
            height: 50px;
            width: 200px;
            font-size: large;
            font-weight: 400;
            color: #ffffff;
        }

        #result1{
            background: #66c28f80;
        }

        #result2{
            background: #2c797ea6;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <!--Plan Info-->
        <div class="calc-section">
            <div class="row text-center">
                <div class="col main-heading">
                    <h3>About the Plans</h3>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-sm">
                    <div class="row">
                        <div class="col h-text c1-b">
                            <h4>Option #1</h4>
                        </div>
                    </div>
                    <div class="row c1-border text-start">
                        <div class="col-12 q-container">
                            <span>Type of Plan</span>
                            <div class="radio-container">
                                <div>
                                    <input type="radio" name="type-of-plan-A" value="Employer" checked />
                                    <label>Employer</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="type-of-plan-A" value="Marketplace" />
                                    <label>Marketplace</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="type-of-plan-A" value="Other" />
                                    <label>Other</label>
                                  </div>
                            </div>
                        </div>
                        <div class="col-12 q-container">
                            <span>Plan Type</span>
                            <div class="radio-container">
                                <div>
                                    <input type="radio" name="plan-type-A" value="HMO" checked />
                                    <label>HMO</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="plan-type-A" value="PPO" />
                                    <label>PPO</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="plan-type-A" value="EPO/Other" />
                                    <label>EPO/Other</label>
                                  </div>
                            </div>
                        </div>
                        <div class="col-12 q-container">
                            <span>Insurance Company Name:</span>
                            <input type="text" />
                        </div>
                        <div class="col-12 q-container">
                            <span>Plan Name:</span>
                            <input type="text" />
                        </div>
                        <div class="col-12 q-container">
                            <span>Is my primary care physician in the plans's network?</span>
                            <div>
                                <div>
                                    <input type="radio" name="primary-care-physician-A" value="Yes" checked />
                                    <label>Yes</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="primary-care-physician-A" value="No" />
                                    <label>No</label>
                                  </div>
                            </div>
                        </div>
                        <div class="col-12 q-container">
                            <span>Are my hospitals and specialists (e.g., oncologist, surgeon) in the plan's network?</span>
                            <div class="radio-container">
                                <div>
                                    <input type="radio" name="plan-network-A" value="Yes" checked />
                                    <label>Yes</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="plan-network-A" value="No" />
                                    <label>No</label>
                                  </div>
                            </div>
                        </div>
                        <div class="col-12 q-container">
                            <span>Are the prescription drugs I take covered by the plan?</span>
                            <div class="radio-container">
                                <div>
                                    <input type="radio" name="prescription-rx-covered-A" value="Yes" checked />
                                    <label>Yes</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="prescription-rx-covered-A" value="No" />
                                    <label>No</label>
                                  </div>
                                  <div>
                                    <input type="radio" name="prescription-rx-covered-A" value="No" />
                                    <label>Only Some</label>
                                  </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm border-calc">
                    <div class="row">
                        <div class="col h-text c2-b">
                            <h4>Option #2</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col c2-border text-start">
                            <div class="col-12 q-container">
                                <span>Type of Plan</span>
                                <div class="radio-container">
                                    <div>
                                        <input type="radio" name="type-of-plan-B" value="Employer" checked />
                                        <label>Employer</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="type-of-plan-B" value="Marketplace" />
                                        <label>Marketplace</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="type-of-plan-B" value="Other" />
                                        <label>Other</label>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12 q-container">
                                <span>Plan Type</span>
                                <div class="radio-container">
                                    <div>
                                        <input type="radio" name="plan-type-B" value="HMO" checked />
                                        <label>HMO</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="plan-type-B" value="PPO" />
                                        <label>PPO</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="plan-type-B" value="EPO/Other" />
                                        <label>EPO/Other</label>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12 q-container">
                                <span>Insurance Company Name:</span>
                                <input type="text" />
                            </div>
                            <div class="col-12 q-container">
                                <span>Plan Name:</span>
                                <input type="text" />
                            </div>
                            <div class="col-12 q-container">
                                <span>Is my primary care physician in the plans's network?</span>
                                <div>
                                    <div>
                                        <input type="radio" name="primary-care-physician-B" value="Yes" checked />
                                        <label>Yes</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="primary-care-physician-B" value="No" />
                                        <label>No</label>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12 q-container">
                                <span>Are my hospitals and specialists(e.g., oncologist, surgeon, etc.)in the plan's network?</span>
                                <div class="radio-container">
                                    <div>
                                        <input type="radio" name="plan-network-B" value="Yes" checked />
                                        <label>Yes</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="plan-network-B" value="No" />
                                        <label>No</label>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12 q-container">
                                <span>Are the prescription drugs I take covered by the plan?</span>
                                <div class="radio-container">
                                    <div>
                                        <input type="radio" name="prescription-rx-covered-B" value="Yes" checked />
                                        <label>Yes</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="prescription-rx-covered-B" value="No" />
                                        <label>No</label>
                                      </div>
                                      <div>
                                        <input type="radio" name="prescription-rx-covered-B" value="No" />
                                        <label>Only Some</label>
                                      </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Plan Cost-->
        <div class="calc-section">
            <div class="row text-center">
                <div class="col main-heading">
                    <h3>Plan Costs</h3>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-sm">
                    <div class="row">
                        <div class="col h-text c1-b">
                            <h4>Option #1</h4>
                        </div>
                    </div>
                    <div class="row c1-border text-start">

                        <div class="col-12 q-container mt-4">
                            <span>Monthly Premium: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="A_1" class="form-control" id="inlineFormInputGroup" placeholder="Premium Value">
                                </div>
                            </div>
                        </div>

                        <div class="col-12 q-container mt-4">
                            <span>Deductible: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="B_1" class="form-control" id="inlineFormInputGroup" placeholder="Deductible">
                                </div>
                            </div>
                        </div>


                        <div class="col-12 q-container mt-4">
                            <span>Out-of-pocket maximum for an individual: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="C_1" class="form-control" id="inlineFormInputGroup" placeholder="">
                                </div>
                            </div>
                        </div>

                        <div class="col-12 q-container mt-4">
                            <span>Does your plan include deductibles in the out-of-pocket maximum? </span>
                            <div>
                                <div>
                                    <input type="radio" name="opt_1_1" value="1" checked />
                                    <label>Yes</label>
                                </div>
                                <div>
                                    <input type="radio" name="opt_1_1" value="0" />
                                    <label>No</label>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 q-container mt-4">
                            <span>Does your plan have a separate deductible and/or out-of-pocket maximum for prescription drugs? </span>
                            <div>
                                <form onchange="handlePlanChange2(1)">
                                    <div>
                                        <input type="radio" name="opt_2_1" value="1" />
                                        <label>Yes</label>
                                    </div>
                                    <div>
                                        <input type="radio" name="opt_2_1" value="0" />
                                        <label>No</label>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="col-12 q-container mt-4" id="toggle_1_1" style="display: none;">
                            <span>Is there a separate deductible for prescription drugs? If yes, enter amount: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="D_1" class="form-control" id="inlineFormInputGroup" placeholder="">
                                </div>
                            </div>
                        </div>

                        <div class="col-12 q-container mt-4" id="toggle_3_1" style="display: none;">
                            <span>Is there a separate out-of-pocket maximum for prescription drugs? If yes, enter amount: </span>
                            <div class="col-md-5">
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                    <div class="input-group-text">$</div>
                                    </div>
                                    <input type="text" id="E_1" class="form-control" id="inlineFormInputGroup" placeholder="">
                                </div>
                            </div>
                        </div>

                        <div class="col-12 q-container mt-4" id="toggle_2_1" style="display: none;">
                            <span>Is the deductible for prescription drugs included in the prescription drug out-of-pocket maximum? </span>
                            <div>
                                <!-- <form onchange="handlePlanChange3(1)"> -->
                                <form>
                                    <div>
                                        <input type="radio" name="opt_3_1" value="1" />
                                        <label>Yes</label>
                                    </div>
                                    <div>
                                        <input type="radio" name="opt_3_1" value="0" />
                                        <label>No</label>
                                    </div>
                                </form>
                            </div>
                        </div>


                       

                        <div class="col-12 q-container mt-4 text-center">
                            <button class="btn btn-1" onclick="calculateOption1()">Calculate Option 1</button>
                        </div>


                    </div>
                </div>
                <div class="col-sm border-calc">
                    <div class="row">
                        <div class="col h-text c2-b">
                            <h4>Option #2</h4>
                        </div>
                    </div>
                    <div class="row c2-border text-start">

                            <div class="col-12 q-container mt-4">
                                <span>Monthly Premium: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="A_2" class="form-control" id="inlineFormInputGroup" placeholder="Premium Value">
                                    </div>
                                </div>
                            </div>
    
                            <div class="col-12 q-container mt-4">
                                <span>Deductible: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="B_2" class="form-control" id="inlineFormInputGroup" placeholder="Deductible">
                                    </div>
                                </div>
                            </div>
    
    
                            <div class="col-12 q-container mt-4">
                                <span>Out-of-pocket Maximum for an Individual: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="C_2" class="form-control" id="inlineFormInputGroup" placeholder="">
                                    </div>
                                </div>
                            </div>
    
    
                            <div class="col-12 q-container mt-4">
                                <span>Does your plan include deductibles in the out-of-pocket maximum? </span>
                                <div>
                                    <div>
                                        <input type="radio" name="opt_1_2" value="1" checked />
                                        <label>Yes</label>
                                    </div>
                                    <div>
                                        <input type="radio" name="opt_1_2" value="0" />
                                        <label>No</label>
                                    </div>
                                </div>
                            </div>
    
                            <div class="col-12 q-container mt-4">
                                <span>Does your plan have a separate deductible and/or out-of-pocket maximum for prescription drugs? </span>
                                <div>
                                    <form onchange="handlePlanChange2(2)">
                                        <div>
                                            <input type="radio" name="opt_2_2" value="1" />
                                            <label>Yes</label>
                                        </div>
                                        <div>
                                            <input type="radio" name="opt_2_2" value="0" />
                                            <label>No</label>
                                        </div>
                                    </form>
                                </div>
                            </div>
    
                            <div class="col-12 q-container mt-4" id="toggle_1_2" style="display: none;">
                                <span>Is there a separate deductible for prescription drugs? If yes, enter amount: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="D_2" class="form-control" id="inlineFormInputGroup" placeholder="">
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 q-container mt-4" id="toggle_3_2" style="display: none;">
                                <span>Is there a separate out-of-pocket maximum for prescription drugs? If yes, enter amount: </span>
                                <div class="col-md-5">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                        <div class="input-group-text">$</div>
                                        </div>
                                        <input type="text" id="E_2" class="form-control" id="inlineFormInputGroup" placeholder="">
                                    </div>
                                </div>
                            </div>
    
                            <div class="col-12 q-container mt-4" id="toggle_2_2" style="display: none;">
                                <span>Is the deductible for prescription drugs included in the prescription drug out-of-pocket maximum? </span>
                                <div>
                                    <!-- <form onchange="handlePlanChange3(2)"> -->
                                    <form>
                                        <div>
                                            <input type="radio" name="opt_3_2" value="1" />
                                            <label>Yes</label>
                                        </div>
                                        <div>
                                            <input type="radio" name="opt_3_2" value="0" />
                                            <label>No</label>
                                        </div>
                                    </form>
                                </div>
                            </div>
    


                            <div class="col-12 q-container mt-4 text-center">
                                <button class="btn btn-2" onclick="calculateOption2()">Calculate Option 2</button>
                            </div>
    
                    </div>
                </div>
            </div>
        </div>

        <!--Results-->
        <div class="calc-section">
            <div class="row text-center">
                <div class="col main-heading">
                    <h3>Results</h3>
                </div>
            </div>
            <div>
                <p style="margin-top: 20px; font-size: 18px;">
                    Below is your total out-of-pocket costs for your in-network, covered, health care for the year, assuming health care expenses will reach the out-of-pocket maximum.
                </p>
            </div>
            <div class="row text-center">
                <div class="col-sm">
                    <div class="row">
                        <div class="col h-text c1-b">
                            <h4>Option #1</h4>
                        </div>
                    </div>
                    <div class="row c1-border">
                        <div class="col">
                            <div class="result-container" id="result1">
                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm border-calc">
                    <div class="row">
                        <div class="col h-text c2-b">
                            <h4>Option #2</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col c2-border">
                            <div class="result-container" id="result2">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <button class="btn btn-3">GET PDF</button>
            </div>
        </div>
    </div>
</body>

<script>
    /*
    LEGEND - 

        A - Monthly Premium
        B - Deductible
        C - Out-of-pocket Maximum for an Individual
        D - Separate deductible for prescription drugs
        E - Separate out-of-pocket maximum for prescription drugs

    CALCULATIONS - 

        CASES:
        1. Integrated deductible & OOP max: D and E are 0 or blank
        2. Separate deductible, shared OOP max: D > 0, E = 0
        3. Separate deductible & separate OOP max: D > 0, E > 0

    */

    // Format number with commas
    function formatNumberWithCommas(value) {
        const parts = value.split(".");
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return parts.join(".");
    }

    // Strip all non-numeric characters except decimal
    function stripNonNumeric(value) {
        return value.replace(/[^\d.]/g, "");
    }

    // Apply formatting while typing
    function handleNumericInput(event) {
        let input = event.target;
        let rawValue = stripNonNumeric(input.value);
        
        if (rawValue === "") {
            input.value = "";
            return;
        }

        // Allow only one decimal
        const parts = rawValue.split(".");
        if (parts.length > 2) {
            input.value = formatNumberWithCommas(parts[0] + "." + parts[1]);
            return;
        }

        input.value = formatNumberWithCommas(rawValue);
    }

    // Convert formatted input back to float
    function parseFormattedNumber(value) {
        return parseFloat(value.replace(/,/g, "")) || 0;
    }

    //Handle option changes 
    function handlePlanChange2(opt) {
        const optionValue  =  document.querySelector(`input[name="opt_2_${opt}"]:checked`)?.value;

        if(optionValue == '1'){
            //show next questions
            document.getElementById(`toggle_1_${opt}`).style.display = 'block';
            document.getElementById(`toggle_2_${opt}`).style.display = 'block';
            document.getElementById(`toggle_3_${opt}`).style.display = 'block';
            
        } else {
            document.getElementById(`toggle_1_${opt}`).style.display = 'none';
            document.getElementById(`toggle_2_${opt}`).style.display = 'none';
            document.getElementById(`toggle_3_${opt}`).style.display = 'none';
        }
    }

    function handlePlanChange3(opt) {
        const optionValue  =  document.querySelector(`input[name="opt_3_${opt}"]:checked`)?.value;

        if(optionValue == '0'){
            //show next questions
            document.getElementById(`toggle_3_${opt}`).style.display = 'block';
            
        } else {
            document.getElementById(`toggle_3_${opt}`).style.display = 'none';
        }
    }


    function calculateTotalCost(option) {
        const monthlyPremium = parseFormattedNumber(document.getElementById(`A_${option}`).value) || 0;
        const deductible = parseFormattedNumber(document.getElementById(`B_${option}`).value) || 0;
        const oopMax = parseFormattedNumber(document.getElementById(`C_${option}`).value) || 0;
        const rxDeductible = parseFormattedNumber(document.getElementById(`D_${option}`).value) || 0;
        const rxOopMax = parseFormattedNumber(document.getElementById(`E_${option}`).value) || 0;
        const planValue1 = document.querySelector(`input[name="opt_1_${option}"]:checked`)?.value;
        const planValue2 = document.querySelector(`input[name="opt_2_${option}"]:checked`)?.value;
        const planValue3 = document.querySelector(`input[name="opt_3_${option}"]:checked`)?.value;
       

        const annualPremium = monthlyPremium * 12;
        const result_1 = planValue1 === '1' ? annualPremium + oopMax : annualPremium + deductible + oopMax;
        let totalCost = 0;

        if(planValue2 === '1') {
            if(planValue3 === '1') {
                totalCost = result_1 + rxOopMax;
            } else {
                totalCost = result_1 + rxDeductible + rxOopMax;
            }
        } else {
            totalCost = result_1;
        }
        

        document.getElementById(`result${option}`).innerText = `Total Out-of-Pocket Cost for Option #${option}: $${(totalCost.toFixed(2)*1).toLocaleString()}`;
    } 

    function calculateOption1() {
        calculateTotalCost(1);
    }

    function calculateOption2() {
        calculateTotalCost(2);
    }

     // Attach event listener to all numeric fields on load
     window.addEventListener("DOMContentLoaded", () => {
        const fields = ["A_1", "B_1", "C_1", "D_1", "E_1", "A_2", "B_2", "C_2", "D_2", "E_2"];
        fields.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                el.addEventListener("input", handleNumericInput);
            }
        });
    });
</script>
</html>
